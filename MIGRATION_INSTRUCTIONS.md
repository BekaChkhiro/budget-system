# მიგრაციის ინსტრუქცია

## მიგრაციის გაშვება Supabase Dashboard-ში

ამ მიგრაციის გაშვება საჭიროა რომ დაემატოს `user_id` სვეტი `projects` ცხრილში და განახლდეს RLS (Row Level Security) პოლისები.

### ნაბიჯები:

1. **გახსენით Supabase Dashboard**
   - გადადით: https://supabase.com/dashboard
   - შედით თქვენს პროექტში

2. **გახსენით SQL Editor**
   - მარცხენა მენიუდან აირჩიეთ "SQL Editor"
   - დააწკაპუნეთ "New Query"

3. **დააკოპირეთ და გაუშვით მიგრაცია**
   - გახსენით ფაილი: `migrations/20241001_add_user_id_to_projects.sql`
   - დააკოპირეთ მთელი SQL კოდი
   - ჩასვით SQL Editor-ში
   - დააწკაპუნეთ "Run" ღილაკს (ან Ctrl+Enter / Cmd+Enter)

4. **შეამოწმეთ წარმატება**
   - თუ ყველაფერი წარმატებით შესრულდა, ნახავთ შეტყობინებას: "Success. No rows returned"
   - შეამოწმეთ რომ `projects` ცხრილს ემატა `user_id` სვეტი

### რა შეიცვალა:

- ✅ დაემატა `user_id` სვეტი `projects` ცხრილში
- ✅ შეიქმნა index `idx_projects_user_id` უკეთესი პროდუქტიულობისთვის
- ✅ განახლდა RLS პოლისები ყველა ცხრილისთვის (projects, payment_installments, transactions)
- ✅ ახლა თითოეული მომხმარებელი ხედავს მხოლოდ საკუთარ პროექტებს

### პრობლემის შემთხვევაში:

თუ მიგრაცია ვერ შესრულდა:
1. შეამოწმეთ რომ არ გაქვთ არსებული პროექტები ბაზაში
2. გაუშვით თითოეული SQL statement ცალ-ცალკე
3. თუ პრობლემა გრძელდება, დაგვიკავშირდით

---

**მნიშვნელობა:** ეს მიგრაცია სავალდებულოა რომ სისტემა სწორად იმუშაოს. გარეშე მისა, პროექტების შექმნა ვერ მოხერხდება.
